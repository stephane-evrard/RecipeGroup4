<div class="container">

    <div class="card" style='width: 100% !important;background: linear-gradient(45deg,rgb(60, 229, 241),#e4e14f);padding:10px;'>

        <h2 class='text-center'>Edit Recipe</h2>
        {% include 'adds/recipe_form_errors.html' %}
        <form method="post" action="{% url 'edit_recipe' recipe.id %}">
            {% csrf_token %}
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="summary">Name</label>
                        <input type="text" class="form-control" name="name" id="name" placeholder="Enter a recipe name" value="{{recipe.name}}">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="id_image">Image</label><br>Currently: <a href="{{recipe.image.url}}">{{recipe.image}}</a>
                        <input type="checkbox" name="image-clear" id="image-clear_id">
                        <label for="image-clear_id">Clear</label><br> Change:
                        <input type="file" name="image" accept="image/*" class="form-control-file is-valid" title="" id="id_image"></div>

                </div>

            </div>
            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="cook_time">Cook time{{recipe.cook_time}}</label>
                        <div class="form-row">
                            <div class="col-3">
                                <input type="number" class="form-control" name="cook_time_num" id="cook_time_num" placeholder="1">
                            </div>
                            <div class="col-9 ">
                                {{ form.cook_time_unit }}
                            </div>
                        </div>
                    </div>

                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="prep_time">Prep time{{recipe.prep_time}}</label>
                        <div class="form-row">
                            <div class="col-3">

                                <input type="number" class="form-control" name="prep_time_num" id="prep_time_num" placeholder="1">
                            </div>
                            <div class="col-9 ">
                                {{ form.prep_time_unit }}
                            </div>
                        </div>
                    </div>
                </div>
            </div>

            <div class="row">
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="servings">Servings</label>
                        <input type="number" class="form-control" name="servings" id="servings" value="{{recipe.servings}}">
                    </div>
                </div>
                <div class="col-md-6">
                    <div class="form-group">
                        <label for="calories">Calories</label>
                        <input type="number" class="form-control" name="calories" id="calories" value="{{recipe.calories}}">
                    </div>
                </div>
            </div>
            <div class="form-group">
                <label for="summary">Summary</label>
                <textarea class="form-control" maxlength="1000" name="summary" id="summary">{{ recipe.summary }}</textarea>
            </div>
            <div class="form-group">
                <label for="ingredients">Ingredients</label>
            </div>
            <div id="ingredients"></div>
            <div class="form-group">
                <button type="button" class="btn btn-secondary form-control" id="add_ingredient">Add ingredient</button>
            </div>

            <div class="form-group">
                <label for="directions">Directions</label>
            </div>
            <div id="directions">

            </div>
            <div class="form-group">
                <button type="button" class="btn btn-secondary form-control" id="add_direction">Add direction</button>
            </div>


            <h6 class="text-center">
                <button type="submit" class="btn btn-primary">Submit</button></h6>
        </form>
    </div>
</div>
<!-- Templates used in JS -->
<div class="form-row form-group" id="ingredient" style="display: none;">
    {% for dir in ingridients %}
    <div class="col-1">
        <button type="button" class="btn btn-primary btn-remove-recipe">
                <span class="oi oi-x" title="Remove recipe" aria-hidden="true"></span>
            </button>
    </div>
    <div class="col-1">
        <input type="number" class="form-control" name="quantity" id="quantity" value="{{dir.quantity}}">
    </div>
    <div class="col-10">
        <input type="text" class="form-control" name="ing_name" id="ing_name" value="{{dir.ingredient.name}}">
    </div>
    {%endfor%}
</div>

<div class="form-row form-group" id="direction" style="display: none;">
    {% for dir in directions %}
    <div class="col-1">
        <button type="button" class="btn btn-primary btn-remove-dir">
                <span class="oi oi-x" title="Remove direction" aria-hidden="true"></span>
            </button>
    </div>
    <div class="col-11">

        <input type="text" name="dir_text" id="dir_text" class="form-control" value="{{dir.text}}">
    </div>
    {%endfor%}
</div>